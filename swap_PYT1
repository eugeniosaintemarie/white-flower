import os
from PyPDF2 import PdfReader, PdfWriter

def compress_pdf(input_folder, output_folder):
    # Crear la carpeta de salida si no existe
    if not os.path.exists(output_folder):
        os.makedirs(output_folder)

    for filename in os.listdir(input_folder):
        if filename.endswith('.pdf'):
            input_path = os.path.join(input_folder, filename)
            output_path = os.path.join(output_folder, filename)

            # Leer el archivo PDF
            reader = PdfReader(input_path)
            writer = PdfWriter()

            # Añadir cada página al nuevo archivo comprimido
            for page_num in range(len(reader.pages)):
                page = reader.pages[page_num]
                writer.add_page(page)

            # Guardar el nuevo PDF sin metadatos
            with open(output_path, "wb") as output_pdf:
                writer.write(output_pdf)

            print(f"Archivo comprimido: {filename}")

# Cambia estas rutas a tus carpetas
input_folder = './pdfs_originales'    # Carpeta con PDFs de entrada
output_folder = './pdfs_comprimidos'  # Carpeta donde se guardarán los PDFs comprimidos

compress_pdf(input_folder, output_folder)
